<app-fullscreen-loader *ngIf="loading"></app-fullscreen-loader>
<section class="login">
  <div class="col-12 mobile-message">
    <img src="../../assets/icons/no-phone.svg" alt="">
    <p>
      <ngb-alert [dismissible]="false">
        This feature is not supported on mobile devices.
      </ngb-alert>
    </p>
  </div>
    <div class="col-lg-10 offset-lg-1 col-md-10 offset-md-1 form-wrapper clearfix">

      <app-fullscreen-loader *ngIf="isFetchedData"></app-fullscreen-loader>
        <div class="col-lg-12 section-heading">
            <p>TradeKings Report Dashboard</p>
            <!-- <p *ngIf="!isFetchedData">Fetching data...</p> -->
        </div>
        <div class="col-lg-12 input-wrapper clearfix">
            <img src="../../assets/icons/xlsx.svg" alt="">
        </div>
        <div class="filters col-lg-12">
            <div class="col-lg-6 pr-0 float-left">
                <form class="form-inline">
                    <div class="form-group hidden">
                      <div class="input-group">
                        <input name="datepicker"
                               class="form-control c-transparent"
                               ngbDatepicker
                               #datepicker="ngbDatepicker"
                               [autoClose]="'outside'"
                               (dateSelect)="onDateSelection($event)"
                               [displayMonths]="2"
                               [dayTemplate]="t"
                               outsideDays="hidden"
                               [startDate]="fromDate!">
                        <ng-template #t let-date let-focused="focused">
                          <span class="custom-day"
                                [class.focused]="focused"
                                [class.range]="isRange(date)"
                                [class.faded]="isHovered(date) || isInside(date)"
                                (mouseenter)="hoveredDate = date"
                                (mouseleave)="hoveredDate = null">
                            {{ date.day }}
                          </span>
                        </ng-template>
                      </div>
                    </div>
                    <div class="form-group fw-item">
                      <label>Start Date</label>
                      <div class="input-group">
                        <input #dpFromDate
                               class="form-control second-cal" 
                               placeholder="yyyy-mm-dd"
                               name="dpFromDate"
                               [value]="formatter.format(fromDate)"
                               (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
                        <div class="input-group-append">
                          <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
                              <i class="fa fa-calendar"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="form-group fw-item">
                      <label>End Date</label>
                      <div class="input-group w-100">
                        <input #dpToDate
                               class="form-control" placeholder="yyyy-mm-dd"
                               name="dpToDate"
                               [value]="formatter.format(toDate)"
                               (input)="toDate = validateInput(toDate, dpToDate.value)">
                        <!-- <div class="input-group-append">
                          <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
                            <i class="fa fa-calendar"></i>
                          </button>
                        </div> -->
                      </div>
                    </div>
                </form>
            </div>
            <div class="col-lg-3 float-left salesman-select">
                <div class="form-group">
                  <label>Salesman</label>
                    <div class="input-group">
                      <div class="input-group-append">
                        <select name="salesman" id="salesman" (change)="getExecutive(executive.value)" #executive class="form-control">
                                <option value="all" selected>All</option>
                                <option value={{ex.externalId}} *ngFor="let ex of executives">{{ex.name}}</option>
                        </select>
                      </div>
                    </div>
                  </div>
            </div>
            <div class="col-lg-3 float-left salesman-select">
                <div class="form-group">
                  <label>Report Type</label>
                    <div class="input-group">
                      <div class="input-group-append">
                        <select name="salesman" id="salesman" [(ngModel)]="reportType" class="form-control">
                            <optgroup label="Select an option">
                                <option value="all" selected>All</option>
                                <option value="price_capturing" selected>Price Capturing</option>
                                <option value="stocking">Stocking</option>
                            </optgroup>
                        </select>
                      </div>
                    </div>
                  </div>
            </div>
        </div>

          <div class="col-lg-12 input-wrapper center-item-wrapper clearfix">
              <button class="btn login-btn hover-shadow" [disabled]="!isAuthorized" (click)="onDownloadSheet()">Generate & Download Sheet</button>
          </div>
      </div>
</section>